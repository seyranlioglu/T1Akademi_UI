<div class="modal-content-wrapper d-flex flex-column h-100">
    
    <div class="modal-header border-bottom px-4 py-3 d-flex justify-content-between align-items-center bg-white">
        <h5 class="modal-title fw-bold text-dark mb-0">
            {{ examId ? 'Sınavı Düzenle' : 'Yeni Sınav Oluştur' }}
        </h5>
        <button type="button" class="btn-close" (click)="close()"></button>
    </div>

    <div class="bg-white border-bottom px-4">
        <ul class="nav nav-tabs border-bottom-0">
            <li class="nav-item">
                <a class="nav-link cursor-pointer fw-medium py-3" 
                   [class.active]="activeTab === 'settings'"
                   [class.text-primary]="activeTab === 'settings'"
                   [class.text-muted]="activeTab !== 'settings'"
                   (click)="switchTab('settings')">
                   <i class='bx bx-cog me-1'></i> Genel Ayarlar
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link cursor-pointer fw-medium py-3" 
                   [class.active]="activeTab === 'curriculum'"
                   [class.text-primary]="activeTab === 'curriculum'"
                   [class.disabled]="!examId"
                   [class.text-muted]="activeTab !== 'curriculum'"
                   (click)="switchTab('curriculum')">
                   <i class='bx bx-list-ul me-1'></i> Konular ve Sorular
                   <span *ngIf="!examId" class="badge bg-light text-muted border ms-1">Önce Kaydet</span>
                </a>
            </li>
        </ul>
    </div>

    <div class="modal-body bg-light p-4 overflow-auto" style="min-height: 400px; max-height: 70vh;">
        
        <div *ngIf="isLoading" class="text-center py-5">
            <div class="spinner-border text-primary" role="status"></div>
        </div>

        <div *ngIf="activeTab === 'settings' && !isLoading" class="container-fluid px-0">
            <form [formGroup]="examForm">
                <div class="card border-0 shadow-sm p-4">
                    <div class="mb-3">
                        <label class="form-label fw-bold small">Sınav Başlığı <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" formControlName="title" placeholder="Örn: İş Sağlığı ve Güvenliği Sınavı">
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-bold small">Açıklama</label>
                        <textarea class="form-control" rows="3" formControlName="description" placeholder="Sınav hakkında kısa bilgi..."></textarea>
                    </div>

                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold small">Sınav Süresi (HH:mm:ss)</label>
                            <input type="text" class="form-control" formControlName="examTime" placeholder="00:30:00">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold small">Geçme Notu (%)</label>
                            <input type="number" class="form-control" formControlName="passingScore">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label fw-bold small">Başarı Hedefi (%)</label>
                            <input type="number" class="form-control" formControlName="successRate">
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div *ngIf="activeTab === 'curriculum' && !isLoading">
            <div class="text-center py-5">
                <i class='bx bx-layer fs-1 text-muted opacity-25 mb-3'></i>
                <h6 class="text-muted">Soru Yönetim Alanı</h6>
                <p class="small text-secondary">Bir sonraki adımda burayı dolduracağız.</p>
            </div>
        </div>

    </div>

    <div class="modal-footer bg-white border-top px-4 py-3">
        <button type="button" class="btn btn-light border" (click)="close()">Kapat</button>
        
        <button type="button" class="btn btn-primary px-4" 
                *ngIf="activeTab === 'settings'" 
                (click)="saveSettings()"
                [disabled]="isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
            {{ examId ? 'Değişiklikleri Kaydet' : 'Sınavı Oluştur ve Devam Et' }}
        </button>
    </div>

</div>
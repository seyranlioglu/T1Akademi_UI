<div *ngIf="isLoading" class="d-flex justify-content-center align-items-center vh-100 bg-white">
    <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
        <span class="visually-hidden">Yükleniyor...</span>
    </div>
</div>

<div *ngIf="!isLoading && errorMsg" class="container py-5 text-center">
    <div class="alert alert-danger d-inline-block px-5 py-4 shadow-sm rounded-3">
        <i class='bx bx-error-circle fs-1 mb-3'></i>
        <h4 class="fw-bold">Erişim Hatası</h4>
        <p class="mb-3">{{ errorMsg }}</p>
        <a routerLink="/courses" class="btn btn-outline-danger rounded-pill px-4">Kataloğa Dön</a>
    </div>
</div>

<div *ngIf="!isLoading && course" class="course-details-wrapper position-relative bg-light pb-5">

    <div class="course-hero-section">
        <div class="container position-relative z-1">
            <div class="row">
                <div class="col-lg-8 py-5">
                    
                    <nav aria-label="breadcrumb" class="mb-4 d-none d-md-block">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item">
                                <a routerLink="/" class="text-info text-decoration-none fw-bold small">Ana Sayfa</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a routerLink="/courses" class="text-info text-decoration-none fw-bold small">Kurslar</a>
                            </li>
                            <li class="breadcrumb-item active text-white small cursor-pointer" aria-current="page" 
                                (click)="goToCategory(course.categoryName)">
                                {{ course.categoryName }}
                            </li>
                        </ol>
                    </nav>

                    <h1 class="display-5 fw-bold text-white mb-3">{{ course.title }}</h1>
                    <div class="lead text-light opacity-75 mb-4 course-desc small" [innerHTML]="course.description"></div>

                    <div class="d-flex flex-wrap gap-3 align-items-center text-white mb-4 meta-info small">
                        <span class="badge bg-warning text-dark fw-bold px-3 py-2 rounded-pill" *ngIf="course.rating > 0">
                            {{ course.rating | number:'1.1-1' }} <i class='bx bxs-star align-middle'></i>
                        </span>
                        <span class="badge bg-secondary bg-opacity-50 px-3 py-2 rounded-pill" *ngIf="course.rating === 0">
                            Yeni
                        </span>
                        
                        <span><i class='bx bx-message-detail text-warning'></i> ({{ course.reviewCount }} değerlendirme)</span>
                        <span><i class='bx bx-user text-info'></i> {{ course.studentCount }} öğrenci</span>
                        <span><i class='bx bx-time text-success'></i> Son Güncelleme: {{ course.lastUpdateDate | date:'MM/yyyy' }}</span>
                    </div>

                    <div class="d-flex align-items-center gap-3 text-white">
                        <img [src]="course.instructorImage || 'assets/images/defaults/defaultuser.png'" 
                             class="rounded-circle border border-2 border-white" width="48" height="48" style="object-fit: cover;">
                        <div>
                            <span class="d-block x-small opacity-75">Oluşturan</span>
                            <span class="fw-bold text-warning">{{ course.instructorName }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero-overlay"></div>
    </div>

    <div class="container position-relative z-index-5">
        <div class="row">
            <div class="col-lg-8">
                <div class="course-stats-bar bg-white shadow rounded-3 p-3 d-none d-lg-flex">
                    <div class="stat-item d-flex align-items-center gap-3 flex-fill border-end px-3">
                        <div class="icon-circle bg-success bg-opacity-10 text-success">
                            <i class='bx bxs-badge-check fs-3'></i>
                        </div>
                        <div>
                            <h6 class="fw-bold m-0 text-dark">Onaylı Eğitim</h6>
                            <small class="text-muted" *ngIf="course.isPremium">Premium İçerik</small>
                            <small class="text-muted" *ngIf="!course.isPremium">Standart Paket</small>
                        </div>
                    </div>
                    <div class="stat-item d-flex align-items-center gap-3 flex-fill border-end px-3">
                        <div class="icon-circle bg-primary bg-opacity-10 text-primary">
                            <i class='bx bx-analyse fs-3'></i>
                        </div>
                        <div>
                            <h6 class="fw-bold m-0 text-dark">TQS Skoru</h6>
                            <small class="text-muted fw-bold text-primary">{{ course.tqs }} Kalite Puanı</small>
                        </div>
                    </div>
                    <div class="stat-item d-flex align-items-center gap-3 flex-fill border-end px-3">
                        <div class="icon-circle bg-warning bg-opacity-10 text-warning">
                            <i class='bx bxs-star fs-3'></i>
                        </div>
                        <div>
                            <h6 class="fw-bold m-0 text-dark">{{ course.rating | number:'1.1-1' }} Ortalama</h6>
                            <small class="text-muted">{{ course.reviewCount }} Yorum</small>
                        </div>
                    </div>
                    <div class="stat-item d-flex align-items-center gap-3 flex-fill px-3">
                        <div class="icon-circle bg-info bg-opacity-10 text-info">
                            <i class='bx bxs-group fs-3'></i>
                        </div>
                        <div>
                            <h6 class="fw-bold m-0 text-dark">{{ course.studentCount }} Öğrenci</h6>
                            <small class="text-muted">Bu kursu seçti</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4 mt-lg-5">
        <div class="row">
            
            <div class="col-lg-8 order-2 order-lg-1">
                
                <div class="standard-card mb-4" *ngIf="course.whatYouWillLearn?.length">
                    <div class="card-header-custom">
                        <h5 class="fw-bold m-0"><i class='bx bx-check-circle me-2 text-success'></i>Öğrenecekleriniz</h5>
                    </div>
                    <div class="card-body p-4">
                        <div class="two-column-list">
                            <div class="list-item d-flex gap-2 mb-2 break-inside-avoid" *ngFor="let item of course.whatYouWillLearn">
                                <i class='bx bx-check text-success fs-5 flex-shrink-0 mt-1'></i>
                                <span class="text-secondary small">{{ item }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="standard-card mb-4">
                    <div class="card-header-custom d-flex justify-content-between align-items-center flex-wrap gap-2">
                        <h5 class="fw-bold m-0"><i class='bx bx-list-ul me-2 text-primary'></i>Kurs İçeriği</h5>
                        <div class="d-flex gap-3 text-muted x-small fw-bold">
                            <span>{{ course.sections.length }} Bölüm</span>
                            <span>{{ course.totalResourceCount }} Kaynak</span>
                            <span>{{ course.videoLength }} Dakika</span>
                        </div>
                    </div>
                    
                    <div class="card-body p-0">
                        <div class="accordion accordion-flush" id="courseAccordion">
                            <div class="accordion-item" *ngFor="let section of course.sections; let i = index">
                                <h2 class="accordion-header">
                                    <button class="accordion-button fw-bold bg-light text-dark shadow-none" type="button" 
                                            data-bs-toggle="collapse" [attr.data-bs-target]="'#collapse'+i">
                                        {{ section.title }}
                                    </button>
                                </h2>
                                <div [id]="'collapse'+i" class="accordion-collapse collapse" [class.show]="i===0">
                                    <div class="accordion-body p-0">
                                        <ul class="list-group list-group-flush">
                                            <li class="list-group-item d-flex justify-content-between align-items-center px-4 py-3 border-bottom-dashed cursor-pointer hover-bg-light" 
                                                *ngFor="let content of section.contents"
                                                [class.preview-enabled]="content.isPreview"
                                                (click)="openContentPreview(content)">
                                                
                                                <div class="d-flex align-items-center gap-3">
                                                    <div class="icon-box" [ngClass]="{'bg-primary-subtle text-primary': content.isPreview, 'bg-light text-muted': !content.isPreview}">
                                                        <i class='bx' [ngClass]="{
                                                            'bx-play-circle fs-4': content.type === 'video',
                                                            'bxs-file-pdf fs-4': content.type === 'pdf',
                                                            'bx-image fs-4': content.type === 'image',
                                                            'bx-task fs-4': content.type === 'exam'
                                                        }"></i>
                                                    </div>
                                                    
                                                    <div class="d-flex flex-column">
                                                        <span class="fw-medium text-dark small" [class.text-primary]="content.isPreview">{{ content.title }}</span>
                                                        <span *ngIf="content.isPreview" class="badge bg-info bg-opacity-10 text-info border border-info d-table mt-1" style="font-size: 9px;">
                                                            Önizleme
                                                        </span>
                                                    </div>
                                                </div>
                                                
                                                <div class="text-end text-muted x-small font-monospace">
                                                    <span *ngIf="content.type === 'exam'">Sınav</span>
                                                    <span *ngIf="content.durationMinutes > 0">{{ content.durationMinutes }} dk</span>
                                                    <span *ngIf="content.pageCount > 0">{{ content.pageCount }} sf</span>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="standard-card mb-4" *ngIf="course.requirements?.length">
                    <div class="card-header-custom"><h5 class="fw-bold m-0 small text-uppercase ls-1">Gereksinimler</h5></div>
                    <div class="card-body p-4">
                        <div class="two-column-list">
                            <div class="list-item d-flex gap-2 mb-2 break-inside-avoid" *ngFor="let req of course.requirements">
                                <i class='bx bxs-circle text-secondary mt-1 flex-shrink-0' style="font-size: 6px;"></i>
                                <span class="text-secondary small">{{ req }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="standard-card mb-4" *ngIf="course.targetAudience?.length">
                    <div class="card-header-custom"><h5 class="fw-bold m-0 small text-uppercase ls-1">Hedef Kitle</h5></div>
                    <div class="card-body p-4">
                        <div class="two-column-list">
                            <div class="list-item d-flex gap-2 mb-2 break-inside-avoid" *ngFor="let aud of course.targetAudience">
                                <i class='bx bx-right-arrow-alt text-danger fs-5 flex-shrink-0'></i>
                                <span class="text-secondary small">{{ aud }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="standard-card mb-4">
                    <div class="card-header-custom">
                        <h5 class="fw-bold m-0"><i class='bx bx-user-voice me-2 text-dark'></i>Eğitmen</h5>
                    </div>
                    <div class="card-body p-4">
                        <div class="d-flex align-items-start gap-4 flex-column flex-sm-row">
                            <div class="flex-shrink-0 text-center">
                                <img [src]="course.instructorImage || 'assets/images/defaults/defaultuser.png'" 
                                     class="rounded-circle border border-3 border-light shadow-sm" 
                                     width="100" height="100" 
                                     style="object-fit: cover;">
                                
                                <div class="mt-3 d-flex flex-column gap-1 small text-muted">
                                    <span><i class='bx bxs-star text-warning'></i> {{ course.instructorRating | number:'1.1-1' }}</span>
                                    <span><i class='bx bxs-group'></i> {{ course.instructorTotalStudents }} Öğrenci</span>
                                    <span><i class='bx bxs-videos'></i> {{ course.instructorTotalCourses }} Kurs</span>
                                </div>
                            </div>
                            
                            <div class="flex-grow-1">
                                <h5 class="fw-bold text-dark mb-1">{{ course.instructorName }}</h5>
                                <p class="text-primary small fw-bold mb-3 text-uppercase">{{ course.instructorTitle }}</p>
                                <div class="text-secondary small" style="white-space: pre-line; line-height: 1.6;">
                                    {{ course.instructorBio || 'Eğitmen biyografisi henüz eklenmemiş.' }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="standard-card mb-4" id="reviews">
                    <div class="card-header-custom d-flex justify-content-between align-items-center">
                        <h5 class="fw-bold m-0"><i class='bx bx-star me-2 text-warning'></i>Öğrenci Yorumları</h5>
                        <span class="badge bg-warning text-dark">{{ course.rating | number:'1.1-1' }}</span>
                    </div>
                    <div class="card-body p-4">
                        <div class="row g-4" *ngIf="course.topReviews?.length; else noReviews">
                            <div class="col-12" *ngFor="let review of course.topReviews | slice:0:3">
                                <div class="d-flex gap-3">
                                    <img [src]="review.userImage || 'assets/images/defaults/defaultuser.png'" class="rounded-circle bg-light" width="40" height="40">
                                    <div>
                                        <h6 class="fw-bold mb-1 small">{{ review.userName }}</h6>
                                        <div class="text-warning x-small mb-2">
                                            <i class='bx bxs-star' *ngFor="let s of [1,2,3,4,5]" [class.text-muted]="s > review.rating"></i>
                                            <span class="text-muted ms-2 fw-normal">{{ review.date | date:'dd.MM.yyyy' }}</span>
                                        </div>
                                        <p class="text-secondary small m-0 fst-italic">"{{ review.comment }}"</p>
                                    </div>
                                </div>
                                <hr class="my-3 text-muted opacity-10">
                            </div>
                        </div>
                        <ng-template #noReviews>
                            <div class="text-center py-4 text-muted">
                                <i class='bx bx-message-square-dots fs-1 mb-2 opacity-50'></i>
                                <p class="small">Henüz bu kursa yorum yapılmamış.</p>
                            </div>
                        </ng-template>

                        <button class="btn btn-outline-primary btn-sm w-100 fw-bold mt-2" 
                                *ngIf="course.reviewCount > 3"
                                (click)="showAllReviews()">
                            Daha Fazla Yorum Görüntüle
                        </button>
                    </div>
                </div>

                <div class="mb-5" *ngIf="course.tags?.length">
                    <h6 class="fw-bold mb-3 text-dark small text-uppercase">Etiketler</h6>
                    <div class="d-flex flex-wrap gap-2">
                        <span class="badge bg-white text-secondary border px-3 py-2 fw-normal rounded-pill cursor-pointer hover-bg-light" 
                              *ngFor="let tag of course.tags" (click)="goToCategory(tag)">
                            #{{ tag }}
                        </span>
                    </div>
                </div>

            </div>

            <div class="col-lg-4 order-1 order-lg-2 position-relative">
                <div class="sidebar-card-wrapper sticky-lg-top" style="top: 20px; z-index: 10;">
                    
                    <div class="card shadow-lg border-0 overflow-hidden mb-3">
                        <div class="position-relative bg-dark" style="height: 200px;">
                            <img [src]="course.headerImage || 'assets/images/defaults/default.jpg'" 
                                 class="w-100 h-100" style="object-fit: cover; opacity: 0.85;">
                            
                            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex flex-column align-items-center justify-content-center bg-dark bg-opacity-25" 
                                 *ngIf="course.previewVideoPath">
                                <button class="btn btn-light rounded-circle p-0 shadow-lg pulse-animation d-flex align-items-center justify-content-center" 
                                        style="width: 56px; height: 56px;"
                                        (click)="openPromoVideo()">
                                    <i class='bx bx-play fs-2 text-dark ms-1'></i>
                                </button>
                                <span class="text-white fw-bold mt-2 text-shadow small text-uppercase letter-spacing-1">Tanıtımı İzle</span>
                            </div>
                        </div>

                        <div class="card-body p-4">
                            <div class="d-flex align-items-center gap-2 mb-4">
                                <h2 class="fw-bold mb-0 text-dark display-6">
                                    {{ course.currentAmount | currency:'TRY':'symbol-narrow':'1.0-0' }}
                                </h2>
                                <div *ngIf="course.discountRate > 0" class="d-flex flex-column ms-2">
                                    <span class="text-decoration-line-through text-muted small">
                                        {{ course.amount | currency:'TRY':'symbol-narrow':'1.0-0' }}
                                    </span>
                                    <span class="badge bg-danger text-white rounded-pill animate-pulse">
                                        %{{ course.discountRate | number:'1.0-0' }} İndirim
                                    </span>
                                </div>
                            </div>

                            <div class="d-grid gap-2">
                                <button class="btn btn-primary btn-lg fw-bold py-3" (click)="openCartModal()">
                                    <i class='bx bx-cart me-2'></i>Sepete Ekle
                                </button>
                                
                                <button class="btn btn-outline-secondary fw-bold" (click)="toggleWishlist()">
                                    <i class='bx bx-heart me-2'></i>İstek Listesine Ekle
                                </button>

                                <div class="d-flex gap-2 mt-2">
                                    <button class="btn btn-light flex-fill border text-muted small fw-bold" (click)="shareCourse()">
                                        <i class='bx bx-share-alt'></i> Paylaş
                                    </button>
                                    <button class="btn btn-light flex-fill border text-muted small fw-bold" (click)="applyCoupon()">
                                        <i class='bx bxs-coupon'></i> Kupon
                                    </button>
                                </div>
                            </div>
                            
                            <div class="text-center mt-3">
                                <small class="text-muted x-small">30 gün para iade garantisi</small>
                            </div>
                        </div>
                    </div>

                    <div class="card border-0 shadow-sm bg-gradient-primary text-white mb-3" 
                         style="background: linear-gradient(45deg, #2b32b2, #1488cc);">
                        <div class="card-body p-4 text-center">
                            <h6 class="fw-bold mb-2 text-uppercase ls-1">Sınırsız Erişim</h6>
                            <p class="small opacity-75 mb-3">T1 Akademi'nin en seçkin kurslarına sınırsız erişim sağlayın.</p>
                            <button class="btn btn-light w-100 fw-bold text-primary mb-2 shadow-sm" (click)="startSubscription()">Abone Ol</button>
                            <small class="d-block text-white-50 x-small">Ayda ₺199. Dilediğiniz zaman iptal edin.</small>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>

</div>

<div class="video-overlay d-flex align-items-center justify-content-center" *ngIf="isPreviewOpen">
    
    <div class="video-modal-backdrop" (click)="closePreview()"></div>
    
    <div class="video-modal-content bg-white rounded shadow-lg position-relative animate__animated animate__zoomIn">
        
        <div class="d-flex justify-content-between align-items-center p-3 bg-dark text-white border-bottom border-secondary">
            <h6 class="m-0 text-truncate pe-3">
                <i class='bx me-2 text-danger' 
                   [ngClass]="{'bx-play-circle': currentPreviewType === 'video', 'bxs-file-pdf': currentPreviewType === 'pdf'}">
                </i> 
                {{ currentPreviewTitle }}
            </h6>
            <button class="btn btn-sm btn-outline-light rounded-circle d-flex align-items-center justify-content-center" 
                    style="width: 30px; height: 30px;" 
                    (click)="closePreview()">
                <i class='bx bx-x fs-5'></i>
            </button>
        </div>
        
        <div class="content-viewer bg-light d-flex align-items-center justify-content-center" style="min-height: 400px; max-height: 80vh; overflow: hidden;">
            <ng-container [ngSwitch]="currentPreviewType">
                <div *ngSwitchCase="'video'" class="ratio ratio-16x9 w-100 h-100">
                    <iframe [src]="currentPreviewUrl" title="Önizleme" allowfullscreen frameborder="0"></iframe>
                </div>
                <div *ngSwitchCase="'image'" class="w-100 h-100 overflow-auto text-center p-3">
                    <img [src]="currentPreviewUrl" class="img-fluid rounded shadow-sm" style="max-height: 70vh;">
                </div>
                <div *ngSwitchCase="'pdf'" class="w-100 h-100">
                    <iframe [src]="currentPreviewUrl" class="w-100 h-100" style="min-height: 600px; border: none;"></iframe>
                </div>
                <div *ngSwitchCase="'exam'" class="text-center p-5">
                    <div class="mb-3"><i class='bx bx-task text-primary' style="font-size: 4rem;"></i></div>
                    <h4>Sınav İçeriği</h4>
                    <p class="text-muted">Bu bir sınav modülüdür. Önizleme modunda sınav çözülemez.</p>
                    <button class="btn btn-outline-primary btn-sm" (click)="closePreview()">Kapat</button>
                </div>
            </ng-container>
        </div>
    </div>
</div>

<div class="toast-notification" [class.show]="showToast" [class.error]="toastType === 'error'">
    <i class='bx' [class.bx-check-circle]="toastType === 'success'" [class.bx-x-circle]="toastType === 'error'"></i>
    <span>{{ toastMessage }}</span>
</div>

<div class="modal fade" id="addToCartModal" tabindex="-1" #addToCartModal aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title fw-bold">Sepete Ekle</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div *ngIf="course" class="d-flex gap-3 mb-4 align-items-center">
                    <img [src]="course.headerImage" class="rounded border" style="width: 70px; height: 50px; object-fit: cover;">
                    <div>
                        <h6 class="fw-bold text-dark mb-0 line-clamp-1">{{ course.title }}</h6>
                        <small class="text-muted">{{ course.categoryName }}</small>
                    </div>
                </div>
                
                <h6 class="small fw-bold text-muted mb-2">Lisans Paketi Seçin</h6>
                
                <div class="row g-2 mb-4" *ngIf="pricingTiers.length > 0; else noTiers">
                    <div class="col-12" *ngFor="let tier of pricingTiers">
                        <div class="border rounded p-3 cursor-pointer position-relative transition-all" 
                             [class.border-primary]="selectedTier === tier" 
                             [class.bg-light-primary]="selectedTier === tier" 
                             (click)="selectTier(tier)">
                            
                            <div *ngIf="selectedTier === tier" class="position-absolute top-50 end-0 translate-middle-y me-3 text-primary">
                                <i class='bx bxs-check-circle fs-4'></i>
                            </div>
                            
                            <div class="d-flex justify-content-between align-items-center" style="padding-right: 30px;">
                                <div>
                                    <span class="d-block fw-bold text-dark" style="font-size: 0.9rem;">
                                        {{ tier.minLicenceCount }} 
                                        <span *ngIf="tier.maxLicenceCount < 9999">- {{ tier.maxLicenceCount }}</span>
                                        <span *ngIf="tier.maxLicenceCount >= 9999">+</span> Kişi Arası
                                    </span>
                                    <small class="text-muted d-block" *ngIf="tier.discountRate > 0" style="font-size: 0.75rem;">
                                        <span class="badge bg-success bg-opacity-10 text-success border border-success border-opacity-25">
                                            %{{ tier.discountRate }} Toptan İndirim
                                        </span>
                                    </small>
                                </div>
                                <div class="text-end">
                                    <div class="fw-bold fs-5 text-primary">
                                        {{ (tier.amount - (tier.amount * tier.discountRate / 100)) | currency:'TRY':'symbol-narrow':'1.0-0' }}
                                    </div>
                                    <small class="text-muted" style="font-size: 10px;">/Kişi Başı</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <ng-template #noTiers>
                    <div class="alert alert-light border text-center text-muted small">
                        Bu eğitim için özel toptan fiyatlandırma bulunmamaktadır. Standart birim fiyat geçerlidir.
                    </div>
                </ng-template>

                <div class="bg-light p-3 rounded border">
                    <div class="d-flex align-items-center justify-content-between">
                        <div>
                            <label class="small fw-bold text-muted d-block mb-1">Kişi Sayısı</label>
                            <div class="input-group input-group-sm" style="width: 120px;">
                                <button class="btn btn-white border" (click)="decreaseCount()"><i class='bx bx-minus'></i></button>
                                <input type="number" class="form-control text-center fw-bold bg-white" [value]="licenseCount" (input)="onCountChange($event)" min="1">
                                <button class="btn btn-white border" (click)="increaseCount()"><i class='bx bx-plus'></i></button>
                            </div>
                        </div>
                        <div class="text-end">
                            <small class="text-muted d-block mb-1">Tahmini Toplam</small>
                            <span class="fw-bold text-dark fs-4">{{ modalTotalPrice | currency:'TRY':'symbol-narrow':'1.0-0' }}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer border-0 pt-0">
                <button type="button" class="btn btn-light fw-bold" data-bs-dismiss="modal">İptal</button>
                <button type="button" class="btn btn-primary fw-bold px-4 d-flex align-items-center gap-2" 
                        (click)="confirmAddToCart()" [disabled]="isAddingToCart">
                    <span *ngIf="isAddingToCart" class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                    <span>Sepete Ekle</span>
                </button>
            </div>
        </div>
    </div>
</div>